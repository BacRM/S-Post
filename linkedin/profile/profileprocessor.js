try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="37e14b65-5892-490d-9615-9ee71a5590c7",e._sentryDebugIdIdentifier="sentry-dbid-37e14b65-5892-490d-9615-9ee71a5590c7")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"25.11.20-edge"},(()=>{var e={40:(e,s,t)=>{"use strict";t.d(s,{I:()=>i});var n=t(8221);class i extends n.BW{isValidOutput(e){return!0}}},135:(e,s,t)=>{"use strict";t.d(s,{js:()=>n});const n=parseInt("28",10)},1083:(e,s,t)=>{"use strict";t.d(s,{OU:()=>n});const n="Logging"},1226:(e,s,t)=>{"use strict";var n;t.d(s,{F:()=>n}),function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"}(n||(n={}))},1414:(e,s,t)=>{"use strict";t.d(s,{C:()=>o});var n=t(1083),i=t(1226);const r={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class o{constructor(e,s=i.F.WARN){this.name=e,this.level=s,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...s){let t=this.level;if(o.LOG_LEVEL&&(t=o.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(t=window.LOG_LEVEL),!(r[e]>=r[t]))return;let n=console.log.bind(console);e===i.F.ERROR&&console.error&&(n=console.error.bind(console)),e===i.F.WARN&&console.warn&&(n=console.warn.bind(console)),o.BIND_ALL_LOG_LEVELS&&(e===i.F.INFO&&console.info&&(n=console.info.bind(console)),e===i.F.DEBUG&&console.debug&&(n=console.debug.bind(console)));const a=`[${e}] ${this._ts()} ${this.name}`;let l="";if(1===s.length&&"string"==typeof s[0])l=`${a} - ${s[0]}`,n(l);else if(1===s.length)l=`${a} ${s[0]}`,n(a,s[0]);else if("string"==typeof s[0]){let e=s.slice(1);1===e.length&&(e=e[0]),l=`${a} - ${s[0]} ${e}`,n(`${a} - ${s[0]}`,e)}else l=`${a} ${s}`,n(a,s);for(const e of this._pluggables){const s={message:l,timestamp:Date.now()};e.pushLogs([s])}}log(...e){this._log(i.F.INFO,...e)}info(...e){this._log(i.F.INFO,...e)}warn(...e){this._log(i.F.WARN,...e)}error(...e){this._log(i.F.ERROR,...e)}debug(...e){this._log(i.F.DEBUG,...e)}verbose(...e){this._log(i.F.VERBOSE,...e)}addPluggable(e){e&&e.getCategoryName()===n.OU&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}o.LOG_LEVEL=null,o.BIND_ALL_LOG_LEVELS=!1},1688:(e,s,t)=>{"use strict";t.d(s,{g:()=>i});var n=t(8221);class i extends n.BW{isValidOutput(e){return!0}}},1760:(e,s,t)=>{"use strict";t.d(s,{x:()=>i});const n=new(t(1414).C)("waitforelement");function i(e,s=document.body){return new Promise(t=>{const i=document.querySelector(e);if(null!==i)return t(i);const r=new MutationObserver(()=>{const s=document.querySelector(e);null!==s&&(n.debug("Element found:",{selector:e,el:s}),t(s),r.disconnect())});r.observe(s,{childList:!0,subtree:!0})})}},1827:(e,s,t)=>{"use strict";t.d(s,{c:()=>n});class n{title;container;constructor(e,s){this.title=e,this.container=document.createElement("div"),this.container.classList.add(s)}dispose=()=>{this.container.remove()}}},2568:(e,s,t)=>{"use strict";t.d(s,{_:()=>i});var n=t(8221);class i extends n.BW{isValidOutput(e){return!0}}},2808:(e,s,t)=>{"use strict";t.d(s,{a:()=>i});var n=t(8221);class i extends n.BW{isValidOutput(e){return!0}}},3131:function(e,s){var t,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,t=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const s="The message port closed before a response was received.",t=e=>{const t={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(t).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,s=void 0){super(s),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const i=(s,t)=>(...n)=>{e.runtime.lastError?s.reject(new Error(e.runtime.lastError.message)):t.singleCallbackArg||n.length<=1&&!1!==t.singleCallbackArg?s.resolve(n[0]):s.resolve(n)},r=e=>1==e?"argument":"arguments",o=(e,s,t)=>new Proxy(s,{apply:(s,n,i)=>t.call(n,e,...i)});let a=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,s={},t={})=>{let n=Object.create(null),g={has:(s,t)=>t in e||t in n,get(g,m,c){if(m in n)return n[m];if(!(m in e))return;let d=e[m];if("function"==typeof d)if("function"==typeof s[m])d=o(e,e[m],s[m]);else if(a(t,m)){let s=((e,s)=>function(t,...n){if(n.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${r(s.minArgs)} for ${e}(), got ${n.length}`);if(n.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${r(s.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((r,o)=>{if(s.fallbackToNoCallback)try{t[e](...n,i({resolve:r,reject:o},s))}catch(i){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,i),t[e](...n),s.fallbackToNoCallback=!1,s.noCallback=!0,r()}else s.noCallback?(t[e](...n),r()):t[e](...n,i({resolve:r,reject:o},s))})})(m,t[m]);d=o(e,e[m],s)}else d=d.bind(e);else if("object"==typeof d&&null!==d&&(a(s,m)||a(t,m)))d=l(d,s[m],t[m]);else{if(!a(t,"*"))return Object.defineProperty(n,m,{configurable:!0,enumerable:!0,get:()=>e[m],set(s){e[m]=s}}),d;d=l(d,s[m],t["*"])}return n[m]=d,d},set:(s,t,i,r)=>(t in n?n[t]=i:e[t]=i,!0),defineProperty:(e,s,t)=>Reflect.defineProperty(n,s,t),deleteProperty:(e,s)=>Reflect.deleteProperty(n,s)},m=Object.create(e);return new Proxy(m,g)},g=e=>({addListener(s,t,...n){s.addListener(e.get(t),...n)},hasListener:(s,t)=>s.hasListener(e.get(t)),removeListener(s,t){s.removeListener(e.get(t))}}),m=new n(e=>"function"!=typeof e?e:function(s){const t=l(s,{},{getContent:{minArgs:0,maxArgs:0}});e(t)}),c=new n(e=>"function"!=typeof e?e:function(s,t,n){let i,r,o=!1,a=new Promise(e=>{i=function(s){o=!0,e(s)}});try{r=e(s,t,i)}catch(e){r=Promise.reject(e)}const l=!0!==r&&((g=r)&&"object"==typeof g&&"function"==typeof g.then);var g;if(!0!==r&&!l&&!o)return!1;return(l?r:a).then(e=>{n(e)},e=>{let s;s=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:s})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)}),!0}),d=({reject:t,resolve:n},i)=>{e.runtime.lastError?e.runtime.lastError.message===s?n():t(new Error(e.runtime.lastError.message)):i&&i.__mozWebExtensionPolyfillReject__?t(new Error(i.message)):n(i)},u=(e,s,t,...n)=>{if(n.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${r(s.minArgs)} for ${e}(), got ${n.length}`);if(n.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${r(s.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((e,s)=>{const i=d.bind(null,{resolve:e,reject:s});n.push(i),t.sendMessage(...n)})},p={devtools:{network:{onRequestFinished:g(m)}},runtime:{onMessage:g(c),onMessageExternal:g(c),sendMessage:u.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:u.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},A={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return t.privacy={network:{"*":A},services:{"*":A},websites:{"*":A}},l(e,p,t)};e.exports=t(chrome)}},void 0===(n=t.apply(s,[e]))||(e.exports=n)},3416:(e,s,t)=>{"use strict";t.d(s,{R:()=>i});var n=t(8221);class i extends n.BW{isValidOutput(e){return"object"==typeof e&&null!==e&&"isInLists"in e&&"boolean"==typeof e.isInLists&&"userLists"in e&&Array.isArray(e.userLists)&&e.userLists.every(e=>"string"==typeof e)}}},3464:(e,s,t)=>{"use strict";t.d(s,{r:()=>i});var n=t(8221);class i extends n.BW{isValidOutput(e){return Array.isArray(e)}}},3731:(e,s,t)=>{"use strict";t.d(s,{q:()=>g});var n=t(3131),i=t.n(n),r=t(1414),o=t(8221),a=t(3416);const l=new r.C("basecardprocessor");class g{container;options;button;cardDiv;listSelectModal;titleElement;existingListsContainer;isInLists=!1;userLists=[];isLoading=!1;constructor(e,s,t){this.container=e,this.options=s,l.debug("BaseCardProcessor.constructor: start",{container:e,options:s}),this.cardDiv=document.createElement("div"),this.cardDiv.className="artdeco-card pv-profile-card break-words mt2",this.cardDiv.style.padding="24px",e.parentElement?.insertBefore(this.cardDiv,e.nextSibling),this.titleElement=document.createElement("h2"),this.titleElement.className="pvs-header__title text-heading-large",this.titleElement.textContent=i().i18n.getMessage("customfeed_title")||"Custom Feed PerfectPost",this.button=document.createElement("button");const n="artdeco-button artdeco-button--2 ember-view pvs-profile-actions__action";this.button.className=t?`${n} ${t}`:`${n} mt2`,this.button.onclick=()=>this.onClick(),this.existingListsContainer=document.createElement("div"),this.existingListsContainer.className="mt2",this.existingListsContainer.style.display="none",this.cardDiv.append(this.titleElement,this.button,this.existingListsContainer),this.isLoading=!0,this.updateButton(),l.debug("BaseCardProcessor.constructor: starting refreshUserStatus"),this.refreshUserStatus()}updateButton(){l.debug("BaseCardProcessor.updateButton: start",{isLoading:this.isLoading,isInLists:this.isInLists}),this.button.disabled=this.isLoading,this.button.innerHTML="";const e=this.button.className.split(" ").filter(e=>!e.includes("artdeco-button--primary")&&!e.includes("artdeco-button--secondary")&&!e.includes("artdeco-button--muted"));let s,t;if(this.isInLists?e.push("artdeco-button--secondary","artdeco-button--muted"):e.push("artdeco-button--primary"),this.button.className=e.join(" "),this.isLoading){if(s="⟳",t=i().i18n.getMessage("customfeed_loading")||"Chargement...",!document.getElementById("spin-animation")){const e=document.createElement("style");e.id="spin-animation",e.textContent="@keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }",document.head.appendChild(e)}}else this.isInLists?(s="✓",t=i().i18n.getMessage("customfeed_remove_button")||"Supprimer d'un custom feed"):(s="+",t=i().i18n.getMessage("customfeed_add_button")||"Ajouter à un custom feed");const n=document.createElement("span");n.innerHTML=s,n.style.cssText="margin-right: 8px; font-size: 16px; "+(this.isLoading?"animation: spin 1s linear infinite;":"");const r=document.createElement("span");r.className="artdeco-button__text",r.textContent=t,this.button.append(n,r),l.debug("BaseCardProcessor.updateButton: finished",{buttonText:t,disabled:this.button.disabled,className:this.button.className})}async refreshUserStatus(){const e=await this.getUserIdentifier();if(!e)return l.debug("BaseCardProcessor.refreshUserStatus: no user identifier"),this.isLoading=!1,void this.updateButton();l.debug("BaseCardProcessor.refreshUserStatus: starting check for",e),this.isLoading=!0,this.updateButton();try{const s={type:"check_user_in_lists",userIdentifier:e,isOrganization:this.isOrganizationProcessor()};l.debug("BaseCardProcessor.refreshUserStatus: sending message to backend",s);const t=new a.R(s),{response:n}=await o.ge.send(t);l.debug("BaseCardProcessor.refreshUserStatus: received response",n),t.isValidOutput(n)?(this.isInLists=n.isInLists,this.userLists=n.userLists,l.debug("BaseCardProcessor.refreshUserStatus: valid response processed",{isInLists:this.isInLists,userLists:this.userLists})):(l.warn("BaseCardProcessor.refreshUserStatus: invalid response",n),this.isInLists=!1,this.userLists=[])}catch(e){l.error("BaseCardProcessor.refreshUserStatus: error",e),this.isInLists=!1,this.userLists=[]}l.debug("BaseCardProcessor.refreshUserStatus: finishing, setting loading to false"),this.isLoading=!1,this.updateButton(),this.updateExistingLists(),l.debug("BaseCardProcessor.refreshUserStatus: completed")}updateExistingLists(){if(this.isInLists&&this.userLists.length>0){this.existingListsContainer.style.display="block";const e=i().i18n.getMessage("customfeed_existing_lists")||"Présent dans:",s=this.userLists.map(e=>`<div style="font-size: 13px; color: #666; margin-bottom: 4px;">• ${e}</div>`).join("");this.existingListsContainer.innerHTML=`\n        <div style="font-weight: 600; margin-bottom: 8px; font-size: 14px;">${e}</div>\n        ${s}\n      `}else this.existingListsContainer.style.display="none"}dispose(){l.debug("BaseCardProcessor.dispose: called"),this.cardDiv.remove(),this.listSelectModal?.dispose(),l.debug("BaseCardProcessor.dispose: end")}}},3967:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var n=t(3131),i=t.n(n),r=t(1827);class o extends r.c{onCreateList;constructor(e){super(i().i18n.getMessage("listeselectmodal_title"),"pp-modal-body"),this.onCreateList=e;const s=document.createElement("div");s.className="pp-modal-content-empty",s.style.padding="20px",this.container.appendChild(s);const t=document.createElement("h4");t.textContent=i().i18n.getMessage("listselectempty"),s.appendChild(t);const n=document.createElement("h5");n.textContent=i().i18n.getMessage("listeselectempty_description"),s.appendChild(n);const r=document.createElement("button");r.style.marginTop="20px",r.className="pp-modal-content-empty-button artdeco-button artdeco-button--2 artdeco-button--primary ember-view pvs-profile-actions__action",r.textContent=i().i18n.getMessage("listselectempty_createlist"),s.appendChild(r),r.onclick=()=>{this.onCreateList()}}}},5523:(e,s,t)=>{"use strict";t.d(s,{A:()=>g});var n=t(3131),i=t.n(n),r=t(1827),o=t(2808),a=t(2568),l=t(8221);class g extends r.c{constructor(e,s){super(i().i18n.getMessage(void 0!==s?"listselectempty_renamelist":"listselectempty_createlist"),"pp-modal-form-create");const t=document.createElement("div");t.className="pp-modal-list-search-container",this.container.appendChild(t);const n=document.createElement("input");n.className="pp-modal-input",n.placeholder=i().i18n.getMessage("listecreateform_nameplaceholder"),n.value=s?.name??"",t.appendChild(n);const r=document.createElement("button");r.className="pp-modal-submit pp-button pp-no-icon",r.innerText=i().i18n.getMessage(void 0!==s?"listselectempty_renamelist":"listselectempty_createlist"),this.container.appendChild(r),r.onclick=()=>{const t=n.value;if(t.length>0){let n;r.disabled=!0,r.style.cursor="wait",n=void 0===s?l.ge.send(new o.a({type:"create_list",name:t})):l.ge.send(new a._({type:"edit_list",id:s._id,name:t})),n.then(()=>{e()})}}}}},6128:(e,s,t)=>{"use strict";t.d(s,{A:()=>d});var n=t(6943),i=t(7141),r=t(3967),o=t(5523),a=t(8632),l=t(8221),g=t(1688),m=t(40),c=t(3464);class d extends n.a{options;lists=[];constructor(e){super(new i.A,e.onClose),this.options=e,this.refreshList()}refreshList=async()=>{const e=new c.r({type:"get_list_refresh"}),{response:s}=await l.ge.send(e);this.lists=s,0===this.lists.length?this.pushBody(new r.A(this.onCreateList),!0):this.pushBody(new a.A(this.options.premium,this.options.urn,this.lists,this.onListItemClick,this.onCreateList),!0)};onCreateList=()=>{this.pushBody(new o.A(()=>(this.popBody(),this.pushBody(new i.A,!0),this.refreshList())))};onListItemClick=async e=>{const s=this.lists.find(s=>s._id===e);void 0!==s&&(s.members.some(e=>e.urn===this.options.urn)||s.organizations.some(e=>e.urn===this.options.urn)?await this.onRemoveFromList(s):await this.onAddToList(s))};async onAddToList(e){const s=new m.I({type:"add_to_list",id:e._id,urn:this.options.urn,name:this.options.name,picture:this.options.picture,isOrganization:this.options.isOrganization});await l.ge.send(s),this.options.isOrganization?e.organizations.push({urn:this.options.urn,name:this.options.name,picture:this.options.picture}):e.members.push({urn:this.options.urn,name:this.options.name,picture:this.options.picture}),this.options.onUserStatusChange?.()}async onRemoveFromList(e){const s=new g.g({type:"remove_from_list",id:e._id,urn:this.options.urn});await l.ge.send(s),this.options.isOrganization?e.organizations=e.organizations.filter(e=>e.urn!==this.options.urn):e.members=e.members.filter(e=>e.urn!==this.options.urn),this.options.onUserStatusChange?.()}}},6943:(e,s,t)=>{"use strict";t.d(s,{a:()=>n});class n{onClose;root;container;goBackButton;modalTitleText;currentView;views=[];constructor(e,s){this.onClose=s,this.root=document.createElement("div"),this.root.classList.add("pp-modal"),document.body.appendChild(this.root),this.root.onclick=e=>{e.target===this.root&&this.dispose()};const t=document.createElement("div");t.classList.add("pp-modal-content"),this.root.appendChild(t),t.onclick=e=>(e.preventDefault(),e.stopPropagation(),e.stopImmediatePropagation(),!1);const n=document.createElement("div");n.classList.add("pp-modal-header"),t.appendChild(n),this.goBackButton=document.createElement("span"),this.goBackButton.className="pp-modal-go-back-button",this.goBackButton.style.display="none",this.goBackButton.innerHTML='\n<svg fill="currentColor" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">\n      <g id="SVGRepo_bgCarrier" stroke-width="0"></g>\n      <g id="SVGRepo_tracerCarrier" stroke-linecap="round" stroke-linejoin="round"></g>\n      <g id="SVGRepo_iconCarrier">\n        <g data-name="Layer 2">\n          <g data-name="arrow-ios-back">\n            <rect width="24" height="24" transform="rotate(90 12 12)" opacity="0"></rect>\n            <path d="M13.83 19a1 1 0 0 1-.78-.37l-4.83-6a1 1 0 0 1 0-1.27l5-6a1 1 0 0 1 1.54 1.28L10.29 12l4.32 5.36a1 1 0 0 1-.78 1.64z"></path>\n          </g>\n        </g>\n      </g>\n      </svg>',this.goBackButton.onclick=()=>this.popBody(),n.appendChild(this.goBackButton),this.modalTitleText=document.createElement("span"),this.modalTitleText.className="pp-modal-title-text",this.modalTitleText.textContent=e.title,n.appendChild(this.modalTitleText);const i=document.createElement("span");i.className="close",i.innerHTML="&times;",i.onclick=()=>this.dispose(),n.appendChild(i),this.container=document.createElement("div"),this.container.classList.add("pp-modal-body"),t.appendChild(this.container),this.currentView=e,this.container.appendChild(e.container)}dispose=()=>{this.root.remove(),this.onClose()};pushBody=(e,s)=>{!0!==s&&(this.views.push(this.currentView),this.goBackButton.style.display="block"),this.currentView=e,this.container.innerHTML="",this.container.appendChild(e.container),this.modalTitleText.textContent=e.title};popBody=()=>{const e=this.views.pop();void 0!==e&&(this.currentView=e,this.container.innerHTML="",this.container.appendChild(e.container),this.modalTitleText.textContent=e.title,0===this.views.length&&(this.goBackButton.style.display="none"))}}},7141:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var n=t(3131),i=t.n(n),r=t(1827);class o extends r.c{constructor(){super(i().i18n.getMessage("activityaction_loading"),"pp-modal-body-loading")}}},8221:(e,s,t)=>{"use strict";t.d(s,{BW:()=>r,ge:()=>a});var n=t(3131),i=t.n(n);class r{message;constructor(e){this.message=e}deserialize(e){if(this.isValidOutput(e))return e;throw new Error("Invalid output",{cause:e})}}class o{response;constructor(e){this.response=e}}Error;const a=new class{async send(e){const s=await i().runtime.sendMessage(e.message),t=e.deserialize(s);return new o(t)}}},8632:(e,s,t)=>{"use strict";t.d(s,{A:()=>a});var n=t(1827),i=t(3131),r=t.n(i),o=t(135);class a extends n.c{premium;urn;lists;onListItemClick;onCreateListClick;constructor(e,s,t,n,i){if(super(r().i18n.getMessage("listeselectmodal_title"),"pp-modal-list-container"),this.premium=e,this.urn=s,this.lists=t,this.onListItemClick=n,this.onCreateListClick=i,void 0!==this.onCreateListClick){const s=this.onCreateListClick,n=document.createElement("div");n.className="pp-modal-list-element-create",n.textContent=r().i18n.getMessage("listselectempty_createlist"),t.length>=1&&!e&&(n.textContent=r().i18n.getMessage("managelist_reachedratelimite"),n.style.cursor="not-allowed"),n.onclick=()=>s(),this.container.appendChild(n)}this.lists.forEach(e=>{const s=e.members.length+e.organizations.length,t=document.createElement("div");t.className="pp-modal-list-element";const n=document.createElement("div");n.className="pp-modal-list-element-title",t.appendChild(n);const i=document.createElement("div");i.className="pp-modal-list-element-name",i.innerText=e.name,n.appendChild(i);const a=document.createElement("div");if(a.className="pp-modal-list-element-subtext",a.innerText=r().i18n.getMessage("listselect_memberscount",`${s}`),n.appendChild(a),e.members.some(e=>e.urn===this.urn)||e.organizations.some(e=>e.urn===this.urn))t.classList.toggle("pp-modal-list-element-selected"),t.onclick=()=>this._onListItemClick(t,e._id);else if(s>=o.js){t.classList.toggle("pp-modal-list-element--disabled");const e=document.createElement("p");e.className="pp-modal-list-element-text pp-modal-list-element-text--error",e.style.cursor="unset",e.textContent=r().i18n.getMessage("managelistmaxmember"),n.appendChild(e)}else t.onclick=()=>this._onListItemClick(t,e._id);this.container.appendChild(t)})}_onListItemClick=async(e,s)=>{const t=this.lists.find(e=>e._id===s);if(void 0===t)return;const n=t.members.some(e=>e.urn===this.urn)||t.organizations.some(e=>e.urn===this.urn);e.classList.toggle("pp-modal-list-element-loading"),n?(e.classList.toggle("pp-modal-list-element-selected"),await this.onListItemClick(s)):t.members.length+t.organizations.length<o.js&&(await this.onListItemClick(s),e.classList.toggle("pp-modal-list-element-selected"));const i=e.querySelector(".pp-modal-list-element-subtext");null!==i&&(i.textContent=r().i18n.getMessage("listselect_memberscount",`${t.members.length+t.organizations.length}`)),e.classList.toggle("pp-modal-list-element-loading")}}}},s={};function t(n){var i=s[n];if(void 0!==i)return i.exports;var r=s[n]={exports:{}};return e[n].call(r.exports,r,r.exports,t),r.exports}t.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return t.d(s,{a:s}),s},t.d=(e,s)=>{for(var n in s)t.o(s,n)&&!t.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},t.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{"use strict";var e=t(1414),s=t(3731);t(6128),t(1760),new e.C("profileprocessor"),s.q})()})();
//# sourceMappingURL=profileprocessor.js.map