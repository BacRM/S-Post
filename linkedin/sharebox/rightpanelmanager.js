try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="2c9da685-9107-40bd-83e3-454d4fc923a5",e._sentryDebugIdIdentifier="sentry-dbid-2c9da685-9107-40bd-83e3-454d4fc923a5")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"25.11.20-edge"},(()=>{var e={135:(e,t,s)=>{"use strict";s.d(t,{Do:()=>n}),parseInt("28",10);const n="https://chat.perfectpost.social"},1083:(e,t,s)=>{"use strict";s.d(t,{OU:()=>n});const n="Logging"},1226:(e,t,s)=>{"use strict";var n;s.d(t,{F:()=>n}),function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"}(n||(n={}))},1275:(e,t,s)=>{"use strict";s.d(t,{W:()=>f});var n=s(9106),r=s(1414),i=s(8221),a=s(8105),o=s(9616),l=s(3131),g=s.n(l),c=s(135);function m(e){return Array.isArray(e)?e.map(e=>m(e)):Object.assign(Object.assign({},e),{hunks:e.hunks.map(e=>Object.assign(Object.assign({},e),{lines:e.lines.map((t,s)=>{var n;return t.startsWith("\\")||t.endsWith("\r")||(null===(n=e.lines[s+1])||void 0===n?void 0:n.startsWith("\\"))?t:t+"\r"})}))})}function d(e){return Array.isArray(e)?e.map(e=>d(e)):Object.assign(Object.assign({},e),{hunks:e.hunks.map(e=>Object.assign(Object.assign({},e),{lines:e.lines.map(e=>e.endsWith("\r")?e.substring(0,e.length-1):e)}))})}function h(e,t,s){let n=!0,r=!1,i=!1,a=1;return function o(){if(n&&!i){if(r?a++:n=!1,e+a<=s)return e+a;i=!0}if(!r)return i||(n=!0),t<=e-a?e-a++:(r=!0,o())}}function u(e,t,s={}){let n;if(n="string"==typeof t?function(e){const t=e.split(/\n/),s=[];let n=0;function r(){const e={};for(s.push(e);n<t.length;){const s=t[n];if(/^(---|\+\+\+|@@)\s/.test(s))break;const r=/^(?:Index:|diff(?: -r \w+)+)\s+(.+?)\s*$/.exec(s);r&&(e.index=r[1]),n++}for(i(e),i(e),e.hunks=[];n<t.length;){const s=t[n];if(/^(Index:\s|diff\s|---\s|\+\+\+\s|===================================================================)/.test(s))break;if(/^@@/.test(s))e.hunks.push(a());else{if(s)throw new Error("Unknown line "+(n+1)+" "+JSON.stringify(s));n++}}}function i(e){const s=/^(---|\+\+\+)\s+(.*)\r?$/.exec(t[n]);if(s){const t=s[2].split("\t",2),r=(t[1]||"").trim();let i=t[0].replace(/\\\\/g,"\\");/^".*"$/.test(i)&&(i=i.substr(1,i.length-2)),"---"===s[1]?(e.oldFileName=i,e.oldHeader=r):(e.newFileName=i,e.newHeader=r),n++}}function a(){var e;const s=n,r=t[n++].split(/@@ -(\d+)(?:,(\d+))? \+(\d+)(?:,(\d+))? @@/),i={oldStart:+r[1],oldLines:void 0===r[2]?1:+r[2],newStart:+r[3],newLines:void 0===r[4]?1:+r[4],lines:[]};0===i.oldLines&&(i.oldStart+=1),0===i.newLines&&(i.newStart+=1);let a=0,o=0;for(;n<t.length&&(o<i.oldLines||a<i.newLines||(null===(e=t[n])||void 0===e?void 0:e.startsWith("\\")));n++){const e=0==t[n].length&&n!=t.length-1?" ":t[n][0];if("+"!==e&&"-"!==e&&" "!==e&&"\\"!==e)throw new Error(`Hunk at line ${s+1} contained invalid line ${t[n]}`);i.lines.push(t[n]),"+"===e?a++:"-"===e?o++:" "===e&&(a++,o++)}if(a||1!==i.newLines||(i.newLines=0),o||1!==i.oldLines||(i.oldLines=0),a!==i.newLines)throw new Error("Added line count did not match for hunk at line "+(s+1));if(o!==i.oldLines)throw new Error("Removed line count did not match for hunk at line "+(s+1));return i}for(;n<t.length;)r();return s}(t):Array.isArray(t)?t:[t],n.length>1)throw new Error("applyPatch only works with a single input.");return function(e,t,s={}){var n;(s.autoConvertLineEndings||null==s.autoConvertLineEndings)&&((n=e).includes("\r\n")&&!n.startsWith("\n")&&!n.match(/[^\r]\n/)&&function(e){return Array.isArray(e)||(e=[e]),!e.some(e=>e.hunks.some(e=>e.lines.some(e=>!e.startsWith("\\")&&e.endsWith("\r"))))}(t)?t=m(t):function(e){return!e.includes("\r\n")&&e.includes("\n")}(e)&&function(e){return Array.isArray(e)||(e=[e]),e.some(e=>e.hunks.some(e=>e.lines.some(e=>e.endsWith("\r"))))&&e.every(e=>e.hunks.every(e=>e.lines.every((t,s)=>{var n;return t.startsWith("\\")||t.endsWith("\r")||(null===(n=e.lines[s+1])||void 0===n?void 0:n.startsWith("\\"))})))}(t)&&(t=d(t)));const r=e.split("\n"),i=t.hunks,a=s.compareLine||((e,t,s,n)=>t===n),o=s.fuzzFactor||0;let l=0;if(o<0||!Number.isInteger(o))throw new Error("fuzzFactor must be a non-negative integer");if(!i.length)return e;let g="",c=!1,u=!1;for(let e=0;e<i[i.length-1].lines.length;e++){const t=i[i.length-1].lines[e];"\\"==t[0]&&("+"==g[0]?c=!0:"-"==g[0]&&(u=!0)),g=t}if(c){if(u){if(!o&&""==r[r.length-1])return!1}else if(""==r[r.length-1])r.pop();else if(!o)return!1}else if(u)if(""!=r[r.length-1])r.push("");else if(!o)return!1;function A(e,t,s,n=0,i=!0,o=[],l=0){let g=0,c=!1;for(;n<e.length;n++){const m=e[n],d=m.length>0?m[0]:" ",h=m.length>0?m.substr(1):m;if("-"===d){if(!a(t+1,r[t],d,h))return s&&null!=r[t]?(o[l]=r[t],A(e,t+1,s-1,n,!1,o,l+1)):null;t++,g=0}if("+"===d){if(!i)return null;o[l]=h,l++,g=0,c=!0}if(" "===d){if(g++,o[l]=r[t],!a(t+1,r[t],d,h))return c||!s?null:r[t]&&(A(e,t+1,s-1,n+1,!1,o,l+1)||A(e,t+1,s-1,n,!1,o,l+1))||A(e,t,s-1,n+1,!1,o,l);l++,i=!0,c=!1,t++}}return l-=g,t-=g,o.length=l,{patchedLines:o,oldLineLastI:t-1}}const p=[];let f=0;for(let e=0;e<i.length;e++){const t=i[e];let s;const n=r.length-t.oldLines+o;let a;for(let e=0;e<=o;e++){a=t.oldStart+f-1;const r=h(a,l,n);for(;void 0!==a&&(s=A(t.lines,a,e),!s);a=r());if(s)break}if(!s)return!1;for(let e=l;e<a;e++)p.push(r[e]);for(let e=0;e<s.patchedLines.length;e++){const t=s.patchedLines[e];p.push(t)}l=s.oldLineLastI+1,f=a+1-t.oldStart}for(let e=l;e<r.length;e++)p.push(r[e]);return p.join("\n")}(e,n[0],s)}var A=s(6491);const p=new r.C("ChatKitView");class f extends o.X{shareModalProcessor;session;chatKitContainer;bridge;authTokenCache=null;draftId;constructor(e,t,s){super(g().i18n.getMessage("chatkitview_title")||"Assistant IA","pp-chatkit-view"),this.shareModalProcessor=e,this.session=s,this.chatKitContainer=document.createElement("div"),this.chatKitContainer.className="pp-chatkit-container",this.container.appendChild(this.chatKitContainer),this.bridge=new n.Y(this.chatKitContainer,{onReady:()=>{p.debug("ChatKit iframe ready"),this.bridge.setOptions(this.buildChatKitOptions()),t&&this.bridge.setDraftId(t);const e=this.getUserLocale(),s=this.getUserId(),n=this.isDarkMode();this.bridge.setUserInfo(s,e,n),p.debug("Sent user info to ChatKit:",{userId:s,userLocale:e,darkMode:n})},onAction:e=>(p.info("Action ChatKit reçue:",e),this.handleChatKitAction(e)),onClientTool:({name:e,params:t})=>{if(p.info("Client tool appelé:",{name:e,params:t}),"apply_full_diff_from_hidden"===e){const{patch:e}=t;if("string"==typeof e){const t=this.applyDiffToCurrentContent(e);if(null!==t){const e=this.textToHtml(t);this.applyContentToEditor(e),p.info("Patch appliqué avec succès (bridge)")}}}},onLog:(e,...t)=>p[e]?.("[iframe]",...t),onError:e=>{p.error("[iframe] error:",e),this.showError(e)},onAuthTokenRequested:async()=>{const e=await this.getAuthToken();return e?{token:e.token,expiresAt:e.expiresAt}:{token:null}}},t),this.bridge.init()}isUserAuthenticated(){return!!this.session&&this.session.isAuthenticated()&&!this.session.isAccountMismatch()&&!this.session.isAccountNotAssociated()}async getAuthToken(){if(this.authTokenCache){const e=Date.now();if(this.authTokenCache.expiresAt&&e<this.authTokenCache.expiresAt-3e5)return this.authTokenCache}try{const e=await i.ge.send(new a.N);return e.response.token?(this.authTokenCache={token:e.response.token,expiresAt:e.response.expiresAt||Date.now()+33e5},this.authTokenCache):(p.warn("No authentication token available"),null)}catch(e){return p.error("Failed to get authentication token:",e),null}}buildChatKitOptions(){const e=this.isUserAuthenticated();return{api:{url:c.Do,domainKey:"domain_pk_68ecfda6ce8c8190a97e20f2c350ab2a0696ebaba9411d65"},theme:{colorScheme:"light",color:{accent:{primary:"#0a66c2",level:3},surface:{background:"#e0ebee",foreground:"#ffffff"}}},...e?{}:{history:{enabled:!1},header:{enabled:!1}},startScreen:{greeting:g().i18n.getMessage("chatkitview_welcome")||"Bienvenue dans votre Assistant de Rédaction !",prompts:[{label:g().i18n.getMessage("chatkitview_improve")||"Améliore ma publication",prompt:"Améliore ma publication",icon:"bolt"}]},composer:{attachments:{enabled:!1}}}}handleChatKitAction(e){switch(p.info("Action ChatKit reçue:",e),e.type){case"client_action":{const t=e.payload?.intent;p.info("Action client:",t);break}case"start_subscription":case"open_billing":p.info("Redirection vers l'abonnement demandée"),window.open("https://app.perfectpost.fr/settings/subscription","_blank");break;default:p.info("Action ChatKit non gérée:",e)}return Promise.resolve()}showError(e){this.chatKitContainer.innerHTML=`\n      <div class="pp-chatkit-error">\n        <div class="pp-chatkit-error-icon">⚠️</div>\n        <div class="pp-chatkit-error-message">${e}</div>\n      </div>\n    `}refreshAuthentication(){try{this.authTokenCache=null,this.bridge?.setOptions(this.buildChatKitOptions()),this.bridge?.setThreadId(null),p.info("Authentification ChatKit rafraîchie (bridge)")}catch(e){p.error("Erreur lors du rafraîchissement de l'authentification:",e)}}updateDraftId(e){p.info("ChatKitView.updateDraftId appelé avec:",e),this.draftId=e,this.bridge?(this.bridge.setDraftId(e),p.info("DraftId envoyé au bridge:",e)):p.warn("Bridge non disponible pour mise à jour draftId")}applyDiffToCurrentContent(e){try{const t=this.shareModalProcessor.getEditor();if(!t)return p.warn("Éditeur LinkedIn non trouvé pour récupérer le contenu actuel"),null;const s=t.innerHTML,n=this.htmlToText(s);p.info("Contenu actuel (texte brut):",n);const r=u(n,e);return!1===r?(p.warn("Échec de l'application du patch"),null):(p.info("Patch appliqué avec succès, nouveau texte:",r),r)}catch(e){return p.error("Erreur lors de l'application du patch:",e),null}}htmlToText(e){if(!e)return"";const t=document.createElement("div");t.innerHTML=e;const s=[],n=t.querySelectorAll("p");for(let e=0;e<n.length;e++){const t=n[e];if("<br>"===t.innerHTML||"<br/>"===t.innerHTML)s.push("");else{let e=t.textContent||"";const n=t.innerHTML;(n.includes("<br>")||n.includes("<br/>"))&&(e=n.replace(/<br\s*\/?>/gi,"\n").replace(/<[^>]*>/g,"").trim()),s.push(e)}}return 0===s.length?t.textContent||"":s.join("\n")}textToHtml(e){if(!e.trim())return"<p><br></p>";const t=e.split("\n"),s=[];for(let e=0;e<t.length;e++){const n=t[e];if(""===n.trim())e<t.length-1&&s.push("<p><br></p>");else{const e=this.escapeHtml(n);s.push(`<p>${e}</p>`)}}return 0===s.length?"<p><br></p>":s.join("")}escapeHtml(e){const t=document.createElement("div");return t.textContent=e,t.innerHTML}applyContentToEditor(e){try{const t=this.shareModalProcessor.getEditor();if(!t)return void p.warn("Éditeur LinkedIn non trouvé via shareModalProcessor");t.innerHTML=e,t.dispatchEvent(new Event("keyup")),t.dispatchEvent(new Event("input",{bubbles:!0})),t.dispatchEvent(new Event("change",{bubbles:!0})),p.info("Contenu appliqué à l'éditeur LinkedIn")}catch(e){p.error("Erreur lors de l'application du contenu à l'éditeur:",e)}}getUserLocale(){const e=(0,A.B)();return["de","en","es","fr","it","pt"].includes(e)?e:"en"}getUserId(){return this.session?.me?.plainId?this.session.me.plainId.toString():this.session?.miniProfile?.entityUrn?this.session.miniProfile.entityUrn:void 0}isDarkMode(){const e=document.documentElement;if(e.classList.contains("theme-dark")||e.classList.contains("dark-mode"))return!0;if(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches)return!0;const t=window.getComputedStyle(document.body).backgroundColor;if(t){const e=t.match(/rgb\((\d+),\s*(\d+),\s*(\d+)\)/);if(e){const[,t,s,n]=e.map(Number);return(299*t+587*s+114*n)/1e3<128}}return!1}dispose=()=>{this.bridge?.dispose(),this.container.remove()}}},1392:(e,t,s)=>{"use strict";s.d(t,{$:()=>n});class n{shareModalProcessor;panelContainer;mainViewContainer;titleContainer;spanTitle;goBackButton=void 0;views=[];constructor(e,t,s,n,r,i="append",a){this.shareModalProcessor=e,this.panelContainer=document.createElement("div"),this.panelContainer.classList.add("pp-panel-container"),this.panelContainer.classList.add(t),void 0!==a&&(this.panelContainer.style.width=`${a}px`,this.panelContainer.style.setProperty("--panel-width",`${a}px`));const o=this.shareModalProcessor.getShareboxModal();"prepend"===i?o.prepend(this.panelContainer):o.append(this.panelContainer),this.titleContainer=document.createElement("div"),this.titleContainer.classList.add("pp-panel-title-container"),this.titleContainer.classList.add(s),this.panelContainer.append(this.titleContainer),this.spanTitle=document.createElement("span"),this.spanTitle.textContent=r,this.titleContainer.append(this.spanTitle),this.mainViewContainer=document.createElement("div"),this.mainViewContainer.classList.add("pp-panel-main-view-container"),this.mainViewContainer.classList.add(n),this.panelContainer.append(this.mainViewContainer)}get container(){return this.panelContainer}dispose=()=>{this.disposeCustomContent(),this.panelContainer&&this.panelContainer.remove()};setHidden(e){e?this.panelContainer.classList.add(this.getHiddenClass()):this.panelContainer.classList.remove(this.getHiddenClass())}setDisabled(e){e?this.panelContainer.classList.add("pp-panel-container--disabled"):this.panelContainer.classList.remove("pp-panel-container--disabled")}isHidden(){return this.panelContainer.classList.contains(this.getHiddenClass())}isDisabled(){return this.panelContainer.classList.contains("pp-panel-container--disabled")}pushView=e=>{this.views.push(e),this.onBeforePushView(e),this.setupBackButtonIfNeeded(e),this.spanTitle.textContent=e.title,this.mainViewContainer.append(e.container),e.container.classList.add("pp-slide-view"),setTimeout(()=>{e.container.classList.add("pp-slide-view--visible")},50)};popView=()=>{const e=this.views.pop();if(0===this.views.length)this.goBackButton?.remove(),this.goBackButton=void 0,this.spanTitle.textContent=this.getDefaultTitle(),this.onReturnToMainView();else{const e=this.views[this.views.length-1];this.spanTitle.textContent=e.title}e&&(e.container.classList.remove("pp-slide-view--visible"),setTimeout(()=>{e.dispose()},500))};setupBackButtonIfNeeded=e=>{this.shouldShowBackButton(e)&&void 0===this.goBackButton&&(this.goBackButton=document.createElement("button"),this.goBackButton.className="pp-button pp-go-back-button",this.goBackButton.addEventListener("click",()=>{this.popView()}),this.titleContainer.prepend(this.goBackButton))}}},1414:(e,t,s)=>{"use strict";s.d(t,{C:()=>a});var n=s(1083),r=s(1226);const i={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class a{constructor(e,t=r.F.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...t){let s=this.level;if(a.LOG_LEVEL&&(s=a.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(s=window.LOG_LEVEL),!(i[e]>=i[s]))return;let n=console.log.bind(console);e===r.F.ERROR&&console.error&&(n=console.error.bind(console)),e===r.F.WARN&&console.warn&&(n=console.warn.bind(console)),a.BIND_ALL_LOG_LEVELS&&(e===r.F.INFO&&console.info&&(n=console.info.bind(console)),e===r.F.DEBUG&&console.debug&&(n=console.debug.bind(console)));const o=`[${e}] ${this._ts()} ${this.name}`;let l="";if(1===t.length&&"string"==typeof t[0])l=`${o} - ${t[0]}`,n(l);else if(1===t.length)l=`${o} ${t[0]}`,n(o,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),l=`${o} - ${t[0]} ${e}`,n(`${o} - ${t[0]}`,e)}else l=`${o} ${t}`,n(o,t);for(const e of this._pluggables){const t={message:l,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(r.F.INFO,...e)}info(...e){this._log(r.F.INFO,...e)}warn(...e){this._log(r.F.WARN,...e)}error(...e){this._log(r.F.ERROR,...e)}debug(...e){this._log(r.F.DEBUG,...e)}verbose(...e){this._log(r.F.VERBOSE,...e)}addPluggable(e){e&&e.getCategoryName()===n.OU&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}a.LOG_LEVEL=null,a.BIND_ALL_LOG_LEVELS=!1},3131:function(e,t){var s,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,s=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const t="The message port closed before a response was received.",s=e=>{const s={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(s).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const r=(t,s)=>(...n)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):s.singleCallbackArg||n.length<=1&&!1!==s.singleCallbackArg?t.resolve(n[0]):t.resolve(n)},i=e=>1==e?"argument":"arguments",a=(e,t,s)=>new Proxy(t,{apply:(t,n,r)=>s.call(n,e,...r)});let o=Function.call.bind(Object.prototype.hasOwnProperty);const l=(e,t={},s={})=>{let n=Object.create(null),g={has:(t,s)=>s in e||s in n,get(g,c,m){if(c in n)return n[c];if(!(c in e))return;let d=e[c];if("function"==typeof d)if("function"==typeof t[c])d=a(e,e[c],t[c]);else if(o(s,c)){let t=((e,t)=>function(s,...n){if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${i(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${i(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((i,a)=>{if(t.fallbackToNoCallback)try{s[e](...n,r({resolve:i,reject:a},t))}catch(r){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,r),s[e](...n),t.fallbackToNoCallback=!1,t.noCallback=!0,i()}else t.noCallback?(s[e](...n),i()):s[e](...n,r({resolve:i,reject:a},t))})})(c,s[c]);d=a(e,e[c],t)}else d=d.bind(e);else if("object"==typeof d&&null!==d&&(o(t,c)||o(s,c)))d=l(d,t[c],s[c]);else{if(!o(s,"*"))return Object.defineProperty(n,c,{configurable:!0,enumerable:!0,get:()=>e[c],set(t){e[c]=t}}),d;d=l(d,t[c],s["*"])}return n[c]=d,d},set:(t,s,r,i)=>(s in n?n[s]=r:e[s]=r,!0),defineProperty:(e,t,s)=>Reflect.defineProperty(n,t,s),deleteProperty:(e,t)=>Reflect.deleteProperty(n,t)},c=Object.create(e);return new Proxy(c,g)},g=e=>({addListener(t,s,...n){t.addListener(e.get(s),...n)},hasListener:(t,s)=>t.hasListener(e.get(s)),removeListener(t,s){t.removeListener(e.get(s))}}),c=new n(e=>"function"!=typeof e?e:function(t){const s=l(t,{},{getContent:{minArgs:0,maxArgs:0}});e(s)}),m=new n(e=>"function"!=typeof e?e:function(t,s,n){let r,i,a=!1,o=new Promise(e=>{r=function(t){a=!0,e(t)}});try{i=e(t,s,r)}catch(e){i=Promise.reject(e)}const l=!0!==i&&((g=i)&&"object"==typeof g&&"function"==typeof g.then);var g;if(!0!==i&&!l&&!a)return!1;return(l?i:o).then(e=>{n(e)},e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:t})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)}),!0}),d=({reject:s,resolve:n},r)=>{e.runtime.lastError?e.runtime.lastError.message===t?n():s(new Error(e.runtime.lastError.message)):r&&r.__mozWebExtensionPolyfillReject__?s(new Error(r.message)):n(r)},h=(e,t,s,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${i(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${i(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((e,t)=>{const r=d.bind(null,{resolve:e,reject:t});n.push(r),s.sendMessage(...n)})},u={devtools:{network:{onRequestFinished:g(c)}},runtime:{onMessage:g(m),onMessageExternal:g(m),sendMessage:h.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:h.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},A={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return s.privacy={network:{"*":A},services:{"*":A},websites:{"*":A}},l(e,u,s)};e.exports=s(chrome)}},void 0===(n=s.apply(t,[e]))||(e.exports=n)},6491:(e,t,s)=>{"use strict";s.d(t,{B:()=>i});var n=s(3131),r=s.n(n);function i(){const e=r().i18n.getUILanguage();return e.indexOf("-")?e.split("-")[0]:e}},8105:(e,t,s)=>{"use strict";s.d(t,{N:()=>r});var n=s(8221);class r extends n.BW{constructor(){super({type:"chat_auth_token"})}isValidOutput(e){return"object"==typeof e&&null!==e&&"token"in e&&("string"==typeof e.token||null===e.token)}}},8221:(e,t,s)=>{"use strict";s.d(t,{BW:()=>i,ge:()=>o});var n=s(3131),r=s.n(n);class i{message;constructor(e){this.message=e}deserialize(e){if(this.isValidOutput(e))return e;throw new Error("Invalid output",{cause:e})}}class a{response;constructor(e){this.response=e}}Error;const o=new class{async send(e){const t=await r().runtime.sendMessage(e.message),s=e.deserialize(t);return new a(s)}}},9106:(e,t,s)=>{"use strict";s.d(t,{Y:()=>o});var n=s(1414),r=s(3131),i=s.n(r);const a=new n.C("ChatKitBridge");class o{mount;callbacks;draftId;iframe=null;iframeOrigin;isReady=!1;pendingAuthRequests=new Map;constructor(e,t={},s){this.mount=e,this.callbacks=t,this.draftId=s,this.iframeOrigin=i().runtime.getURL(""),window.addEventListener("message",this.onMessage,!1)}init(){if(this.iframe)return;const e=i().runtime.getURL("chat.html"),t=document.createElement("iframe");t.src=e,t.allow="clipboard-read; clipboard-write",t.className="pp-chatkit-iframe",t.style.width="100%",t.style.height="100%",t.style.border="0",this.mount.appendChild(t),this.iframe=t}dispose(){window.removeEventListener("message",this.onMessage,!1),this.iframe&&(this.iframe.remove(),this.iframe=null),this.pendingAuthRequests.clear()}setOptions(e){this.postToIframe({ns:"PP_CHATKIT",cmd:"SET_OPTIONS",options:e})}setThreadId(e){this.postToIframe({ns:"PP_CHATKIT",cmd:"SET_THREAD",threadId:e})}setDraftId(e){this.draftId=e,this.postToIframe({ns:"PP_CHATKIT",cmd:"SET_DRAFT_ID",draftId:e})}setUserInfo(e,t,s){this.postToIframe({ns:"PP_CHATKIT",cmd:"SET_USER_INFO",userId:e,userLocale:t,darkMode:s})}onMessage=async e=>{if(!this.iframe||e.source!==this.iframe.contentWindow)return;if(e.origin!==this.iframeOrigin.replace(/\/$/,""))return;if("object"!=typeof e.data||!e.data)return;const t=e.data;if(!t.ns||"PP_CHATKIT"!==t.ns)return;const s=e.data;switch(a.debug("Received message from iframe:",s),s.type){case"READY":this.isReady=!0,this.draftId&&this.postToIframe({ns:"PP_CHATKIT",cmd:"SET_DRAFT_ID",draftId:this.draftId}),this.callbacks.onReady?.();break;case"REQUEST_AUTH_TOKEN":{const e=s.reqId;try{const t=await(this.callbacks.onAuthTokenRequested?.())??{token:null};this.postToIframe({ns:"PP_CHATKIT",cmd:"AUTH_TOKEN_RESULT",reqId:e,...t})}catch{this.postToIframe({ns:"PP_CHATKIT",cmd:"AUTH_TOKEN_RESULT",reqId:e,token:null})}break}case"CLIENT_ACTION":this.callbacks.onAction?.(s.payload);break;case"CLIENT_TOOL":this.callbacks.onClientTool?.(s.payload);break;case"LOG":this.callbacks.onLog?.(s.level,...s.args||[]);break;case"ERROR":this.callbacks.onError?.(s.message)}};postToIframe(e){a.debug("Posting message to iframe:",e),this.iframe&&this.iframe.contentWindow&&this.iframe.contentWindow.postMessage(e,this.iframeOrigin.replace(/\/$/,""))}}},9616:(e,t,s)=>{"use strict";s.d(t,{X:()=>n});class n{title;container;constructor(e,t){this.title=e,this.container=document.createElement("div"),this.container.classList.add(t)}dispose=()=>{this.container.remove()}}}},t={};function s(n){var r=t[n];if(void 0!==r)return r.exports;var i=t[n]={exports:{}};return e[n].call(i.exports,i,i.exports,s),i.exports}s.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return s.d(t,{a:t}),t},s.d=(e,t)=>{for(var n in t)s.o(t,n)&&!s.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},s.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";s(3131);var e=s(1392);s(1275),e.$})()})();
//# sourceMappingURL=rightpanelmanager.js.map