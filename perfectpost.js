try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="cde28030-0a58-4fb5-96ad-6e64891b6204",e._sentryDebugIdIdentifier="sentry-dbid-cde28030-0a58-4fb5-96ad-6e64891b6204")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"25.11.20-edge"},(()=>{var e={135:(e,s,r)=>{"use strict";r.d(s,{E$:()=>t,jq:()=>n}),parseInt("28",10);const n="https://app.perfectpost.fr",t="WARN"},3131:function(e,s){var r,n;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const s="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class n extends WeakMap{constructor(e,s=void 0){super(s),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const t=(s,r)=>(...n)=>{e.runtime.lastError?s.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||n.length<=1&&!1!==r.singleCallbackArg?s.resolve(n[0]):s.resolve(n)},g=e=>1==e?"argument":"arguments",a=(e,s,r)=>new Proxy(s,{apply:(s,n,t)=>r.call(n,e,...t)});let o=Function.call.bind(Object.prototype.hasOwnProperty);const i=(e,s={},r={})=>{let n=Object.create(null),m={has:(s,r)=>r in e||r in n,get(m,l,A){if(l in n)return n[l];if(!(l in e))return;let c=e[l];if("function"==typeof c)if("function"==typeof s[l])c=a(e,e[l],s[l]);else if(o(r,l)){let s=((e,s)=>function(r,...n){if(n.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${g(s.minArgs)} for ${e}(), got ${n.length}`);if(n.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${g(s.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((g,a)=>{if(s.fallbackToNoCallback)try{r[e](...n,t({resolve:g,reject:a},s))}catch(t){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,t),r[e](...n),s.fallbackToNoCallback=!1,s.noCallback=!0,g()}else s.noCallback?(r[e](...n),g()):r[e](...n,t({resolve:g,reject:a},s))})})(l,r[l]);c=a(e,e[l],s)}else c=c.bind(e);else if("object"==typeof c&&null!==c&&(o(s,l)||o(r,l)))c=i(c,s[l],r[l]);else{if(!o(r,"*"))return Object.defineProperty(n,l,{configurable:!0,enumerable:!0,get:()=>e[l],set(s){e[l]=s}}),c;c=i(c,s[l],r["*"])}return n[l]=c,c},set:(s,r,t,g)=>(r in n?n[r]=t:e[r]=t,!0),defineProperty:(e,s,r)=>Reflect.defineProperty(n,s,r),deleteProperty:(e,s)=>Reflect.deleteProperty(n,s)},l=Object.create(e);return new Proxy(l,m)},m=e=>({addListener(s,r,...n){s.addListener(e.get(r),...n)},hasListener:(s,r)=>s.hasListener(e.get(r)),removeListener(s,r){s.removeListener(e.get(r))}}),l=new n(e=>"function"!=typeof e?e:function(s){const r=i(s,{},{getContent:{minArgs:0,maxArgs:0}});e(r)}),A=new n(e=>"function"!=typeof e?e:function(s,r,n){let t,g,a=!1,o=new Promise(e=>{t=function(s){a=!0,e(s)}});try{g=e(s,r,t)}catch(e){g=Promise.reject(e)}const i=!0!==g&&((m=g)&&"object"==typeof m&&"function"==typeof m.then);var m;if(!0!==g&&!i&&!a)return!1;return(i?g:o).then(e=>{n(e)},e=>{let s;s=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",n({__mozWebExtensionPolyfillReject__:!0,message:s})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)}),!0}),c=({reject:r,resolve:n},t)=>{e.runtime.lastError?e.runtime.lastError.message===s?n():r(new Error(e.runtime.lastError.message)):t&&t.__mozWebExtensionPolyfillReject__?r(new Error(t.message)):n(t)},d=(e,s,r,...n)=>{if(n.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${g(s.minArgs)} for ${e}(), got ${n.length}`);if(n.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${g(s.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((e,s)=>{const t=c.bind(null,{resolve:e,reject:s});n.push(t),r.sendMessage(...n)})},u={devtools:{network:{onRequestFinished:m(l)}},runtime:{onMessage:m(A),onMessageExternal:m(A),sendMessage:d.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:d.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},p={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":p},services:{"*":p},websites:{"*":p}},i(e,u,r)};e.exports=r(chrome)}},void 0===(n=r.apply(s,[e]))||(e.exports=n)},8221:(e,s,r)=>{"use strict";r.d(s,{BW:()=>g,ge:()=>o});var n=r(3131),t=r.n(n);class g{message;constructor(e){this.message=e}deserialize(e){if(this.isValidOutput(e))return e;throw new Error("Invalid output",{cause:e})}}class a{response;constructor(e){this.response=e}}Error;const o=new class{async send(e){const s=await t().runtime.sendMessage(e.message),r=e.deserialize(s);return new a(r)}}},8998:(e,s,r)=>{"use strict";r.d(s,{H:()=>g});var n=r(8221),t=r(9136);class g extends n.BW{constructor(e){super(e)}isValidOutput(e){return(0,t.y_)(e)&&"search_typeahead_response"===e.type}}},9136:(e,s,r)=>{"use strict";function n(e){if("object"!=typeof e||null===e)return!1;const s=e;return"search_typeahead"===s.type&&"string"==typeof s.searchKeyword&&"string"==typeof s.queryId}function t(e){return null!=e&&"object"==typeof e&&"source"in e&&void 0!==e?.source&&"perfectpost"===e.source&&"type"in e&&void 0!==e?.type&&("check_install"===e.type||"reload_session"===e.type||"check_queue"===e.type||"login_only"===e.type||"search_typeahead"===e.type)}function g(e){if(null!=e&&"object"==typeof e&&"source"in e&&"type"in e){const s=e;return"perfectpost"===s.source&&"string"==typeof s.type&&["check_install_response","check_queue_response","reload_session_response","login_only_response","search_typeahead_response"].includes(s.type)}return!1}r.d(s,{Qi:()=>n,tt:()=>t,y_:()=>g})}},s={};function r(n){var t=s[n];if(void 0!==t)return t.exports;var g=s[n]={exports:{}};return e[n].call(g.exports,g,g.exports,r),g.exports}r.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return r.d(s,{a:s}),s},r.d=(e,s)=>{for(var n in s)r.o(s,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:s[n]})},r.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{"use strict";var e,s,n=r(3131),t=r.n(n),g=r(9136);!function(e){e[e.Idle=0]="Idle",e[e.Processing=1]="Processing"}(e||(e={})),function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"}(s||(s={}));const a={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class o{constructor(e,r=s.WARN){this.name=e,this.level=r,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...r){let n=this.level;if(o.LOG_LEVEL&&(n=o.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(n=window.LOG_LEVEL),!(a[e]>=a[n]))return;let t=console.log.bind(console);e===s.ERROR&&console.error&&(t=console.error.bind(console)),e===s.WARN&&console.warn&&(t=console.warn.bind(console)),o.BIND_ALL_LOG_LEVELS&&(e===s.INFO&&console.info&&(t=console.info.bind(console)),e===s.DEBUG&&console.debug&&(t=console.debug.bind(console)));const g=`[${e}] ${this._ts()} ${this.name}`;let i="";if(1===r.length&&"string"==typeof r[0])i=`${g} - ${r[0]}`,t(i);else if(1===r.length)i=`${g} ${r[0]}`,t(g,r[0]);else if("string"==typeof r[0]){let e=r.slice(1);1===e.length&&(e=e[0]),i=`${g} - ${r[0]} ${e}`,t(`${g} - ${r[0]}`,e)}else i=`${g} ${r}`,t(g,r);for(const e of this._pluggables){const s={message:i,timestamp:Date.now()};e.pushLogs([s])}}log(...e){this._log(s.INFO,...e)}info(...e){this._log(s.INFO,...e)}warn(...e){this._log(s.WARN,...e)}error(...e){this._log(s.ERROR,...e)}debug(...e){this._log(s.DEBUG,...e)}verbose(...e){this._log(s.VERBOSE,...e)}addPluggable(e){e&&"Logging"===e.getCategoryName()&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}o.LOG_LEVEL=null,o.BIND_ALL_LOG_LEVELS=!1;var i=r(135),m=r(8221),l=r(8998);o.LOG_LEVEL=i.E$;const A=new o("PerfectPost - Extension");console.log("PerfectPost content script loaded",{LOG_LEVEL:i.E$}),"$crisp"in window&&"object"==typeof window.$crisp&&null!==window.$crisp&&window.$crisp.push(["set","session:data",[[["extension_version",t().runtime.getManifest().version]]]]),window.addEventListener("message",e=>{if(!(e.source instanceof Window)||e.origin!==i.jq&&"https://app.perfectpost.fr"!==e.origin&&"https://beta.perfectpost.fr"!==e.origin)return;const s=e.data,r=s?.requestId;(0,g.Qi)(s)?m.ge.send(new l.H(s)).then(({response:s})=>{A.debug("Received typeahead result",{origin:e.origin,response:s}),window.postMessage({...s,requestId:r},e.origin)}).catch(s=>{window.postMessage({source:"perfectpost",type:"search-reusable-typeahead-by-blended_response",status:"error",error:s instanceof Error?s.message:String(s),requestId:r},e.origin)}):(0,g.tt)(s)&&(A.debug("Received message",{origin:e.origin,data:s}),t().runtime.sendMessage(s).then(s=>{A.debug("Received result",{origin:e.origin,result:s}),(0,g.y_)(s)&&(A.debug("Forward result"),window.postMessage({...s,requestId:r},e.origin))}).catch(n=>{window.postMessage({type:s.type+"_response",status:"error",error:n instanceof Error?n.message:String(n),requestId:r},e.origin)}))},!1),t().runtime.onMessage.addListener(e=>{var s;return A.debug("onMessage",{message:e}),((0,g.y_)(e)||null!=(s=e)&&"object"==typeof s&&"source"in s&&void 0!==s?.source&&"perfectpost"===s.source&&"type"in s&&void 0!==s?.type&&"queue_state"===s.type&&"payload"in s&&void 0!==s?.payload&&null!==s.payload&&"object"==typeof s.payload&&"state"in s.payload&&void 0!==s.payload?.state&&"commandStack"in s.payload&&void 0!==s.payload?.commandStack)&&window.postMessage(e,window.location.origin),!0})})()})();
//# sourceMappingURL=perfectpost.js.map