try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},s=(new e.Error).stack;s&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[s]="6aba4ac7-a60e-4ead-b734-a584585f7870",e._sentryDebugIdIdentifier="sentry-dbid-6aba4ac7-a60e-4ead-b734-a584585f7870")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"25.11.20-edge"},(()=>{var e={135:(e,s,r)=>{"use strict";r.d(s,{ZF:()=>t}),parseInt("28",10);const t="4258fd0662441212e44d8ab268b1e1be"},1083:(e,s,r)=>{"use strict";r.d(s,{OU:()=>t});const t="Logging"},1226:(e,s,r)=>{"use strict";var t;r.d(s,{F:()=>t}),function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"}(t||(t={}))},1414:(e,s,r)=>{"use strict";r.d(s,{C:()=>a});var t=r(1083),n=r(1226);const i={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class a{constructor(e,s=n.F.WARN){this.name=e,this.level=s,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...s){let r=this.level;if(a.LOG_LEVEL&&(r=a.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(r=window.LOG_LEVEL),!(i[e]>=i[r]))return;let t=console.log.bind(console);e===n.F.ERROR&&console.error&&(t=console.error.bind(console)),e===n.F.WARN&&console.warn&&(t=console.warn.bind(console)),a.BIND_ALL_LOG_LEVELS&&(e===n.F.INFO&&console.info&&(t=console.info.bind(console)),e===n.F.DEBUG&&console.debug&&(t=console.debug.bind(console)));const g=`[${e}] ${this._ts()} ${this.name}`;let o="";if(1===s.length&&"string"==typeof s[0])o=`${g} - ${s[0]}`,t(o);else if(1===s.length)o=`${g} ${s[0]}`,t(g,s[0]);else if("string"==typeof s[0]){let e=s.slice(1);1===e.length&&(e=e[0]),o=`${g} - ${s[0]} ${e}`,t(`${g} - ${s[0]}`,e)}else o=`${g} ${s}`,t(g,s);for(const e of this._pluggables){const s={message:o,timestamp:Date.now()};e.pushLogs([s])}}log(...e){this._log(n.F.INFO,...e)}info(...e){this._log(n.F.INFO,...e)}warn(...e){this._log(n.F.WARN,...e)}error(...e){this._log(n.F.ERROR,...e)}debug(...e){this._log(n.F.DEBUG,...e)}verbose(...e){this._log(n.F.VERBOSE,...e)}addPluggable(e){e&&e.getCategoryName()===t.OU&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}a.LOG_LEVEL=null,a.BIND_ALL_LOG_LEVELS=!1},3131:function(e,s){var r,t;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const s="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class t extends WeakMap{constructor(e,s=void 0){super(s),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const n=(s,r)=>(...t)=>{e.runtime.lastError?s.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||t.length<=1&&!1!==r.singleCallbackArg?s.resolve(t[0]):s.resolve(t)},i=e=>1==e?"argument":"arguments",a=(e,s,r)=>new Proxy(s,{apply:(s,t,n)=>r.call(t,e,...n)});let g=Function.call.bind(Object.prototype.hasOwnProperty);const o=(e,s={},r={})=>{let t=Object.create(null),m={has:(s,r)=>r in e||r in t,get(m,l,A){if(l in t)return t[l];if(!(l in e))return;let c=e[l];if("function"==typeof c)if("function"==typeof s[l])c=a(e,e[l],s[l]);else if(g(r,l)){let s=((e,s)=>function(r,...t){if(t.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${i(s.minArgs)} for ${e}(), got ${t.length}`);if(t.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${i(s.maxArgs)} for ${e}(), got ${t.length}`);return new Promise((i,a)=>{if(s.fallbackToNoCallback)try{r[e](...t,n({resolve:i,reject:a},s))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),r[e](...t),s.fallbackToNoCallback=!1,s.noCallback=!0,i()}else s.noCallback?(r[e](...t),i()):r[e](...t,n({resolve:i,reject:a},s))})})(l,r[l]);c=a(e,e[l],s)}else c=c.bind(e);else if("object"==typeof c&&null!==c&&(g(s,l)||g(r,l)))c=o(c,s[l],r[l]);else{if(!g(r,"*"))return Object.defineProperty(t,l,{configurable:!0,enumerable:!0,get:()=>e[l],set(s){e[l]=s}}),c;c=o(c,s[l],r["*"])}return t[l]=c,c},set:(s,r,n,i)=>(r in t?t[r]=n:e[r]=n,!0),defineProperty:(e,s,r)=>Reflect.defineProperty(t,s,r),deleteProperty:(e,s)=>Reflect.deleteProperty(t,s)},l=Object.create(e);return new Proxy(l,m)},m=e=>({addListener(s,r,...t){s.addListener(e.get(r),...t)},hasListener:(s,r)=>s.hasListener(e.get(r)),removeListener(s,r){s.removeListener(e.get(r))}}),l=new t(e=>"function"!=typeof e?e:function(s){const r=o(s,{},{getContent:{minArgs:0,maxArgs:0}});e(r)}),A=new t(e=>"function"!=typeof e?e:function(s,r,t){let n,i,a=!1,g=new Promise(e=>{n=function(s){a=!0,e(s)}});try{i=e(s,r,n)}catch(e){i=Promise.reject(e)}const o=!0!==i&&((m=i)&&"object"==typeof m&&"function"==typeof m.then);var m;if(!0!==i&&!o&&!a)return!1;return(o?i:g).then(e=>{t(e)},e=>{let s;s=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",t({__mozWebExtensionPolyfillReject__:!0,message:s})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)}),!0}),c=({reject:r,resolve:t},n)=>{e.runtime.lastError?e.runtime.lastError.message===s?t():r(new Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?r(new Error(n.message)):t(n)},d=(e,s,r,...t)=>{if(t.length<s.minArgs)throw new Error(`Expected at least ${s.minArgs} ${i(s.minArgs)} for ${e}(), got ${t.length}`);if(t.length>s.maxArgs)throw new Error(`Expected at most ${s.maxArgs} ${i(s.maxArgs)} for ${e}(), got ${t.length}`);return new Promise((e,s)=>{const n=c.bind(null,{resolve:e,reject:s});t.push(n),r.sendMessage(...t)})},u={devtools:{network:{onRequestFinished:m(l)}},runtime:{onMessage:m(A),onMessageExternal:m(A),sendMessage:d.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:d.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},x={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":x},services:{"*":x},websites:{"*":x}},o(e,u,r)};e.exports=r(chrome)}},void 0===(t=r.apply(s,[e]))||(e.exports=t)},7032:(e,s,r)=>{"use strict";var t=r(3131),n=r.n(t),i=r(135),a=r(1414);class g{async get(e){const s=await n().storage.local.get(e);return s?.[e]??void 0}async set(e,s){await n().storage.local.set({[e]:s})}async remove(e){await n().storage.local.remove(e)}}function o(e){return new Promise(s=>setTimeout(s,e))}new class{token;apiBase;maxRetries;backoffBaseMs;storagePrefix;storage;getNow;distinctId;superProps={};optedOut=!1;initialized=!1;initPromise;KEYS={distinctId:"distinctId",superProps:"superProps",optedOut:"optedOut"};logger;constructor(e){this.token=e.token,this.apiBase=e.apiBase??"https://api.mixpanel.com",this.maxRetries=Math.max(0,e.maxRetries??2),this.backoffBaseMs=Math.max(0,e.backoffBaseMs??300),this.storagePrefix=e.storagePrefix??"mpw:",this.storage=e.storage??new g,this.getNow=e.getNow??(()=>Date.now()),this.logger=new a.C("MixpanelWorkerService")}async init(){this.initialized||(this.initPromise??=(async()=>{const[e,s,r]=await Promise.all([this.getStorage(this.KEYS.distinctId),this.getStorage(this.KEYS.superProps),this.getStorage(this.KEYS.optedOut)]);this.distinctId=e??await this.generateAndPersistDistinctId(),this.superProps=s??{},this.optedOut=r??!1;const t=n().runtime.getManifest?.();this.registerSuperProps({$lib:"mixpanel-worker-service",$lib_version:"1.0.0",$app_version:t?.version??null,extension_id:n().runtime.id,extension_name:t?.name??null,extension_version:t?.version??null,environment:this.inferEnvironment()??null,browser_vendor:this.inferBrowserVendor(),application:"extension"}),this.initialized=!0})(),await this.initPromise)}async ensureInit(){this.initialized||await this.init()}async identify(e){this.distinctId=e,await this.setStorage(this.KEYS.distinctId,e),this.logger.info("identify",{distinctId:e})}registerSuperProps(e){this.superProps={...this.superProps,...e},this.setStorage(this.KEYS.superProps,this.superProps).catch(()=>{}),this.logger.info("registerSuperProps",e)}async setOptOut(e){this.optedOut=e,await this.setStorage(this.KEYS.optedOut,e),this.logger.info("setOptOut",{optOut:e})}async track(e,s){if(this.optedOut)return;await this.ensureInit();const r={token:this.token,distinct_id:this.distinctId??null,time:Math.floor(this.getNow()/1e3),...this.superProps,...s??{}};this.logger.info("[MPW] track",{event:e,distinctId:this.distinctId,props:r}),await this.sendWithRetry([{event:e,properties:r}])||this.logger.warn("[MPW] track failed permanently",{event:e,props:r})}async reset(){await Promise.all([this.removeStorage(this.KEYS.distinctId),this.removeStorage(this.KEYS.superProps),this.removeStorage(this.KEYS.optedOut)]),this.distinctId=await this.generateAndPersistDistinctId(),this.superProps={},this.optedOut=!1,this.logger.info("[MPW] reset done",{distinctId:this.distinctId})}inferEnvironment(){try{return!1===("undefined"!=typeof navigator?navigator.onLine:void 0)?"offline":"online"}catch{return}}inferBrowserVendor(){try{const e=globalThis?.navigator?.userAgent??"";return/Firefox/i.test(e)?"firefox":/Edg\//i.test(e)?"edge":/Chrome/i.test(e)?"chrome":/Safari/i.test(e)?"safari":null}catch{return null}}isFirefox(){try{return/Firefox/i.test(globalThis?.navigator?.userAgent??"")}catch{return!1}}async sendWithRetry(e){const s=this.apiBase.replace(/\/$/,""),r=this.isFirefox(),t=function(e){const s=(new TextEncoder).encode(e);let r="";for(let e=0;e<s.length;e++)r+=String.fromCharCode(s[e]);return btoa(r)}(JSON.stringify(e));let n=0;for(;;){try{if(r){const e=`${s}/track?ip=1&img=1&data=${encodeURIComponent(t)}`;return await fetch(e,{method:"GET",mode:"no-cors"}),!0}{const e=new URLSearchParams;e.set("data",t),e.set("verbose","1");const r=await fetch(`${s}/track?ip=1`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString()});if(r.ok){const e=await r.json().catch(()=>({}));if(1===e?.status)return!0;this.logger.warn("[MPW] Mixpanel verbose error",e)}else if(this.logger.warn("[MPW] HTTP error",r.status),r.status>=400&&r.status<500)return!1}}catch(e){this.logger.warn("[MPW] fetch failed",e)}if(n>=this.maxRetries)return!1;n+=1;const e=this.backoffBaseMs*2**(n-1);await o(e)}}async generateAndPersistDistinctId(){const e=()=>Math.floor(65536*(1+Math.random())).toString(16).slice(1),s=`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`;return await this.setStorage(this.KEYS.distinctId,s),s}k(e){return`${this.storagePrefix}${e}`}async getStorage(e){return this.storage.get(this.k(e))}async setStorage(e,s){return this.storage.set(this.k(e),s)}async removeStorage(e){return this.storage.remove(this.k(e))}}({apiBase:"https://api-eu.mixpanel.com",token:i.ZF,maxRetries:2,backoffBaseMs:300,storagePrefix:"pp:"})},8221:(e,s,r)=>{"use strict";var t=r(3131),n=r.n(t);class i{response;constructor(e){this.response=e}}Error,new class{async send(e){const s=await n().runtime.sendMessage(e.message),r=e.deserialize(s);return new i(r)}}}},s={};function r(t){var n=s[t];if(void 0!==n)return n.exports;var i=s[t]={exports:{}};return e[t].call(i.exports,i,i.exports,r),i.exports}r.n=e=>{var s=e&&e.__esModule?()=>e.default:()=>e;return r.d(s,{a:s}),s},r.d=(e,s)=>{for(var t in s)r.o(s,t)&&!r.o(e,t)&&Object.defineProperty(e,t,{enumerable:!0,get:s[t]})},r.o=(e,s)=>Object.prototype.hasOwnProperty.call(e,s),(()=>{"use strict";r(8221),r(7032),new(r(1414).C)("TrackingMessageHandler")})()})();
//# sourceMappingURL=index.js.map