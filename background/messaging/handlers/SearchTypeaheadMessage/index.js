try{let e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="d79689f4-ac0b-4ac0-b804-14e98a8cf80a",e._sentryDebugIdIdentifier="sentry-dbid-d79689f4-ac0b-4ac0-b804-14e98a8cf80a")}catch(e){}("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:{}).SENTRY_RELEASE={id:"25.11.20-edge"},(()=>{var e={135:(e,t,r)=>{"use strict";r.d(t,{ZF:()=>s}),parseInt("28",10);const s="4258fd0662441212e44d8ab268b1e1be"},1083:(e,t,r)=>{"use strict";r.d(t,{OU:()=>s});const s="Logging"},1226:(e,t,r)=>{"use strict";var s;r.d(t,{F:()=>s}),function(e){e.DEBUG="DEBUG",e.ERROR="ERROR",e.INFO="INFO",e.WARN="WARN",e.VERBOSE="VERBOSE",e.NONE="NONE"}(s||(s={}))},1414:(e,t,r)=>{"use strict";r.d(t,{C:()=>i});var s=r(1083),n=r(1226);const a={VERBOSE:1,DEBUG:2,INFO:3,WARN:4,ERROR:5,NONE:6};class i{constructor(e,t=n.F.WARN){this.name=e,this.level=t,this._pluggables=[]}_padding(e){return e<10?"0"+e:""+e}_ts(){const e=new Date;return[this._padding(e.getMinutes()),this._padding(e.getSeconds())].join(":")+"."+e.getMilliseconds()}configure(e){return e?(this._config=e,this._config):this._config}_log(e,...t){let r=this.level;if(i.LOG_LEVEL&&(r=i.LOG_LEVEL),"undefined"!=typeof window&&window.LOG_LEVEL&&(r=window.LOG_LEVEL),!(a[e]>=a[r]))return;let s=console.log.bind(console);e===n.F.ERROR&&console.error&&(s=console.error.bind(console)),e===n.F.WARN&&console.warn&&(s=console.warn.bind(console)),i.BIND_ALL_LOG_LEVELS&&(e===n.F.INFO&&console.info&&(s=console.info.bind(console)),e===n.F.DEBUG&&console.debug&&(s=console.debug.bind(console)));const o=`[${e}] ${this._ts()} ${this.name}`;let g="";if(1===t.length&&"string"==typeof t[0])g=`${o} - ${t[0]}`,s(g);else if(1===t.length)g=`${o} ${t[0]}`,s(o,t[0]);else if("string"==typeof t[0]){let e=t.slice(1);1===e.length&&(e=e[0]),g=`${o} - ${t[0]} ${e}`,s(`${o} - ${t[0]}`,e)}else g=`${o} ${t}`,s(o,t);for(const e of this._pluggables){const t={message:g,timestamp:Date.now()};e.pushLogs([t])}}log(...e){this._log(n.F.INFO,...e)}info(...e){this._log(n.F.INFO,...e)}warn(...e){this._log(n.F.WARN,...e)}error(...e){this._log(n.F.ERROR,...e)}debug(...e){this._log(n.F.DEBUG,...e)}verbose(...e){this._log(n.F.VERBOSE,...e)}addPluggable(e){e&&e.getCategoryName()===s.OU&&(this._pluggables.push(e),e.configure(this._config))}listPluggables(){return this._pluggables}}i.LOG_LEVEL=null,i.BIND_ALL_LOG_LEVELS=!1},3131:function(e,t){var r,s;"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self&&self,r=function(e){"use strict";if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)e.exports=globalThis.browser;else{const t="The message port closed before a response was received.",r=e=>{const r={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(0===Object.keys(r).length)throw new Error("api-metadata.json has not been included in browser-polyfill");class s extends WeakMap{constructor(e,t=void 0){super(t),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const n=(t,r)=>(...s)=>{e.runtime.lastError?t.reject(new Error(e.runtime.lastError.message)):r.singleCallbackArg||s.length<=1&&!1!==r.singleCallbackArg?t.resolve(s[0]):t.resolve(s)},a=e=>1==e?"argument":"arguments",i=(e,t,r)=>new Proxy(t,{apply:(t,s,n)=>r.call(s,e,...n)});let o=Function.call.bind(Object.prototype.hasOwnProperty);const g=(e,t={},r={})=>{let s=Object.create(null),l={has:(t,r)=>r in e||r in s,get(l,c,m){if(c in s)return s[c];if(!(c in e))return;let u=e[c];if("function"==typeof u)if("function"==typeof t[c])u=i(e,e[c],t[c]);else if(o(r,c)){let t=((e,t)=>function(r,...s){if(s.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise((a,i)=>{if(t.fallbackToNoCallback)try{r[e](...s,n({resolve:a,reject:i},t))}catch(n){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),r[e](...s),t.fallbackToNoCallback=!1,t.noCallback=!0,a()}else t.noCallback?(r[e](...s),a()):r[e](...s,n({resolve:a,reject:i},t))})})(c,r[c]);u=i(e,e[c],t)}else u=u.bind(e);else if("object"==typeof u&&null!==u&&(o(t,c)||o(r,c)))u=g(u,t[c],r[c]);else{if(!o(r,"*"))return Object.defineProperty(s,c,{configurable:!0,enumerable:!0,get:()=>e[c],set(t){e[c]=t}}),u;u=g(u,t[c],r["*"])}return s[c]=u,u},set:(t,r,n,a)=>(r in s?s[r]=n:e[r]=n,!0),defineProperty:(e,t,r)=>Reflect.defineProperty(s,t,r),deleteProperty:(e,t)=>Reflect.deleteProperty(s,t)},c=Object.create(e);return new Proxy(c,l)},l=e=>({addListener(t,r,...s){t.addListener(e.get(r),...s)},hasListener:(t,r)=>t.hasListener(e.get(r)),removeListener(t,r){t.removeListener(e.get(r))}}),c=new s(e=>"function"!=typeof e?e:function(t){const r=g(t,{},{getContent:{minArgs:0,maxArgs:0}});e(r)}),m=new s(e=>"function"!=typeof e?e:function(t,r,s){let n,a,i=!1,o=new Promise(e=>{n=function(t){i=!0,e(t)}});try{a=e(t,r,n)}catch(e){a=Promise.reject(e)}const g=!0!==a&&((l=a)&&"object"==typeof l&&"function"==typeof l.then);var l;if(!0!==a&&!g&&!i)return!1;return(g?a:o).then(e=>{s(e)},e=>{let t;t=e&&(e instanceof Error||"string"==typeof e.message)?e.message:"An unexpected error occurred",s({__mozWebExtensionPolyfillReject__:!0,message:t})}).catch(e=>{console.error("Failed to send onMessage rejected reply",e)}),!0}),u=({reject:r,resolve:s},n)=>{e.runtime.lastError?e.runtime.lastError.message===t?s():r(new Error(e.runtime.lastError.message)):n&&n.__mozWebExtensionPolyfillReject__?r(new Error(n.message)):s(n)},d=(e,t,r,...s)=>{if(s.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${a(t.minArgs)} for ${e}(), got ${s.length}`);if(s.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${a(t.maxArgs)} for ${e}(), got ${s.length}`);return new Promise((e,t)=>{const n=u.bind(null,{resolve:e,reject:t});s.push(n),r.sendMessage(...s)})},h={devtools:{network:{onRequestFinished:l(c)}},runtime:{onMessage:l(m),onMessageExternal:l(m),sendMessage:d.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:d.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},A={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return r.privacy={network:{"*":A},services:{"*":A},websites:{"*":A}},g(e,h,r)};e.exports=r(chrome)}},void 0===(s=r.apply(t,[e]))||(e.exports=s)},3391:(e,t)=>{"use strict";let r=0;t.Ay=class{constructor(e=1,t){var s;this._nextSemaphoreId=0,this._maxSemaphores=e,this.name=null!==(s=null==t?void 0:t.name)&&void 0!==s?s:"anonymous "+r++,this._loggedName=`“${this.name}”`,this._logger=null==t?void 0:t.logger,this._currentSemaphores=new Set,this._waitingCallers=[]}tryAcquire(e){var t,r;const s=this.nextSemaphoreId();if(null===(t=this._logger)||void 0===t||t.trace(`Trying acquire for semaphore ${this._loggedName} #${s}${e?` (reason: ${e})`:""} …`),this.hasAvailableSemaphores)return null===(r=this._logger)||void 0===r||r.trace(`tryAcquire() successful for semaphore ${this._loggedName} #${s}`),this._currentSemaphores.add(s),this.createReleaseFunction(s);throw new Error("No semaphore available.")}acquire(e){var t;const r=this.nextSemaphoreId();null===(t=this._logger)||void 0===t||t.trace(`Starting acquire for semaphore ${this._loggedName} #${r}${e?` (reason: ${e})`:""} …`);const s=new Promise(e=>{const t=this.createReleaseFunction(r);this._waitingCallers.push(()=>{var s;return null===(s=this._logger)||void 0===s||s.trace(`acquire() successful for semaphore ${this._loggedName} #${r}`),e(t),r})});return setTimeout(()=>this.treatPendingCallers(),0),s}release(e){var t;null===(t=this._logger)||void 0===t||t.trace(`Releasing semaphore ${this._loggedName} #${e}`),this._currentSemaphores.has(e)&&this._currentSemaphores.delete(e),setTimeout(()=>this.treatPendingCallers(),0)}nextSemaphoreId(){return this._nextSemaphoreId++}get hasAvailableSemaphores(){return this._currentSemaphores.size<this._maxSemaphores}createReleaseFunction(e){return()=>this.release(e)}treatPendingCallers(){var e,t;for(null===(e=this._logger)||void 0===e||e.trace(`Checking for free semaphore ${this._loggedName}: ${this._waitingCallers.length} waiting`);this._waitingCallers.length>0&&this.hasAvailableSemaphores;){const e=this._waitingCallers.shift();if(void 0!==e){null===(t=this._logger)||void 0===t||t.trace(`Free semaphore ${this._loggedName} found, assigning.`);const r=e();this._currentSemaphores.add(r)}}}}},3394:(e,t)=>{"use strict";function r(e){return"object"!=typeof e||"toString"in e?e:Object.prototype.toString.call(e).slice(8,-1)}Object.defineProperty(t,"__esModule",{value:!0});var s="object"==typeof process&&!0;function n(e,t){if(!e){if(s)throw new Error("Invariant failed");throw new Error(t())}}t.invariant=n;var a=Object.prototype.hasOwnProperty,i=Array.prototype.splice,o=Object.prototype.toString;function g(e){return o.call(e).slice(8,-1)}var l=Object.assign||function(e,t){return c(t).forEach(function(r){a.call(t,r)&&(e[r]=t[r])}),e},c="function"==typeof Object.getOwnPropertySymbols?function(e){return Object.keys(e).concat(Object.getOwnPropertySymbols(e))}:function(e){return Object.keys(e)};function m(e){return Array.isArray(e)?l(e.constructor(e.length),e):"Map"===g(e)?new Map(e):"Set"===g(e)?new Set(e):e&&"object"==typeof e?l(Object.create(Object.getPrototypeOf(e)),e):e}var u=function(){function e(){this.commands=l({},d),this.update=this.update.bind(this),this.update.extend=this.extend=this.extend.bind(this),this.update.isEquals=function(e,t){return e===t},this.update.newContext=function(){return(new e).update}}return Object.defineProperty(e.prototype,"isEquals",{get:function(){return this.update.isEquals},set:function(e){this.update.isEquals=e},enumerable:!0,configurable:!0}),e.prototype.extend=function(e,t){this.commands[e]=t},e.prototype.update=function(e,t){var r=this,s="function"==typeof t?{$apply:t}:t;Array.isArray(e)&&Array.isArray(s)||n(!Array.isArray(s),function(){return"update(): You provided an invalid spec to update(). The spec may not contain an array except as the value of $set, $push, $unshift, $splice or any custom command allowing an array value."}),n("object"==typeof s&&null!==s,function(){return"update(): You provided an invalid spec to update(). The spec and every included key path must be plain objects containing one of the following commands: "+Object.keys(r.commands).join(", ")+"."});var i=e;return c(s).forEach(function(t){if(a.call(r.commands,t)){var n=e===i;i=r.commands[t](s[t],i,s,e),n&&r.isEquals(i,e)&&(i=e)}else{var o="Map"===g(e)?r.update(e.get(t),s[t]):r.update(e[t],s[t]),l="Map"===g(i)?i.get(t):i[t];r.isEquals(o,l)&&(void 0!==o||a.call(e,t))||(i===e&&(i=m(e)),"Map"===g(i)?i.set(t,o):i[t]=o)}}),i},e}();t.Context=u;var d={$push:function(e,t,r){return A(t,r,"$push"),e.length?t.concat(e):t},$unshift:function(e,t,r){return A(t,r,"$unshift"),e.length?e.concat(t):t},$splice:function(e,t,s,a){return function(e,t){n(Array.isArray(e),function(){return"Expected $splice target to be an array; got "+r(e)}),f(t.$splice)}(t,s),e.forEach(function(e){f(e),t===a&&e.length&&(t=m(a)),i.apply(t,e)}),t},$set:function(e,t,r){return function(e){n(1===Object.keys(e).length,function(){return"Cannot have more than one key in an object with $set"})}(r),e},$toggle:function(e,t){p(e,"$toggle");var r=e.length?m(t):t;return e.forEach(function(e){r[e]=!t[e]}),r},$unset:function(e,t,r,s){return p(e,"$unset"),e.forEach(function(e){Object.hasOwnProperty.call(t,e)&&(t===s&&(t=m(s)),delete t[e])}),t},$add:function(e,t,r,s){return x(t,"$add"),p(e,"$add"),"Map"===g(t)?e.forEach(function(e){var r=e[0],n=e[1];t===s&&t.get(r)!==n&&(t=m(s)),t.set(r,n)}):e.forEach(function(e){t!==s||t.has(e)||(t=m(s)),t.add(e)}),t},$remove:function(e,t,r,s){return x(t,"$remove"),p(e,"$remove"),e.forEach(function(e){t===s&&t.has(e)&&(t=m(s)),t.delete(e)}),t},$merge:function(e,t,s,a){var i,o;return i=t,n((o=e)&&"object"==typeof o,function(){return"update(): $merge expects a spec of type 'object'; got "+r(o)}),n(i&&"object"==typeof i,function(){return"update(): $merge expects a target of type 'object'; got "+r(i)}),c(e).forEach(function(r){e[r]!==t[r]&&(t===a&&(t=m(a)),t[r]=e[r])}),t},$apply:function(e,t){var s;return n("function"==typeof(s=e),function(){return"update(): expected spec of $apply to be a function; got "+r(s)+"."}),e(t)}},h=new u;function A(e,t,s){n(Array.isArray(e),function(){return"update(): expected target of "+r(s)+" to be an array; got "+r(e)+"."}),p(t[s],s)}function p(e,t){n(Array.isArray(e),function(){return"update(): expected spec of "+r(t)+" to be an array; got "+r(e)+". Did you forget to wrap your parameter in an array?"})}function f(e){n(Array.isArray(e),function(){return"update(): expected spec of $splice to be an array of arrays; got "+r(e)+". Did you forget to wrap your parameters in an array?"})}function x(e,t){var s=g(e);n("Map"===s||"Set"===s,function(){return"update(): "+r(t)+" expects a target of type Set or Map; got "+r(s)})}t.isEquals=h.update.isEquals,t.extend=h.extend,t.default=h.update,t.default.default=e.exports=l(t.default,t)},5049:()=>{"use strict";const e=globalThis.chrome&&new function e(t){return new Proxy(t,{get(t,r){if(t[r])return"function"!=typeof t[r]?new e(t[r]):(...e)=>new Promise((s,n)=>{t[r](...e,e=>{chrome.runtime.lastError?n(new Error(chrome.runtime.lastError.message)):s(e)})})}})}(globalThis.chrome);function t(e){if(!e)return!1;try{const{pathname:t}=new URL(e,location.origin);return t===location.pathname}catch{return!1}}function r(e){return globalThis.chrome?.runtime?.getManifest?.()}function s(e){let t;return()=>(void 0!==t||(t=e()),t)}const n=s(()=>["about:","http:","https:"].includes(location.protocol)),a=s(()=>"string"==typeof globalThis.chrome?.runtime?.id),i=s(()=>location.protocol.endsWith("-extension:")&&!a()),o=s(()=>a()&&n()),g=s(()=>{const e=r();return!!e&&(!!t(e.background_page??e.background?.page)||Boolean(e.background?.scripts&&t("/_generated_background_page.html")))}),l=s(()=>t(r()?.background?.service_worker)),c={contentScript:o,background:()=>g()||l(),options:(s(()=>g()&&2===r()?.manifest_version&&!1!==r()?.background?.persistent),s(()=>t(r()?.options_ui?.page??r()?.options_page))),sidePanel:s(()=>t(r()?.side_panel?.default_path)),actionPopup:s(()=>globalThis.outerHeight-globalThis.innerHeight===14||t(r()?.action?.default_popup??r()?.browser_action?.default_popup)),devTools:()=>Boolean(globalThis.chrome?.devtools),devToolsPage:s(()=>a()&&Boolean(chrome.devtools)&&t(r()?.devtools_page)),offscreenDocument:s(()=>a()&&"document"in globalThis&&void 0===globalThis.chrome?.extension),extension:a,sandbox:i,web:n};Object.keys(c);const m={days:e=>864e5*e,hours:e=>36e5*e,minutes:e=>6e4*e,seconds:e=>1e3*e,milliseconds:e=>e,microseconds:e=>e/1e3,nanoseconds:e=>e/1e6},u={days:30};async function d(t,r){const s=`cache:${t}`,n=(await e.storage.local.get(s))[s];if(void 0!==n){if(!(Date.now()>n.maxAge))return n;r&&await e.storage.local.remove(s)}}async function h(t){const r=`cache:${t}`;return e.storage.local.remove(r)}async function A(t){const r=await e.storage.local.get(),s=[];for(const[e,n]of Object.entries(r))e.startsWith("cache:")&&(t?.(n)??1)&&s.push(e);s.length>0&&await e.storage.local.remove(s)}async function p(){await A(e=>Date.now()>e.maxAge)}const f={has:async function(e){return void 0!==await d(e,!1)},get:async function(e){const t=await d(e,!0);return t?.data},set:async function(t,r,s=u){if(arguments.length<2)throw new TypeError("Expected a value as the second argument");if(void 0===r)await h(t);else{const a=`cache:${t}`;await e.storage.local.set({[a]:{data:r,maxAge:(n=s,Date.now()+function(e){let t=0;for(const[r,s]of Object.entries(e)){if("number"!=typeof s)throw new TypeError(`Expected a \`number\` for key \`${r}\`, got \`${s}\` (${typeof s})`);const e=m[r];if(!e)throw new Error(`Unsupported time key: ${r}`);t+=e(s)}return t}(n))}})}var n;return r},clear:async function(){await A()},delete:h};!function(){if(a()&&(globalThis.webextStorageCache=f),g())if(chrome.alarms){chrome.alarms.create("webext-storage-cache",{delayInMinutes:1,periodInMinutes:1440});let e=0;chrome.alarms.onAlarm.addListener(t=>{"webext-storage-cache"===t.name&&e<Date.now()-1e3&&(e=Date.now(),p())})}else setTimeout(p,6e4),setInterval(p,864e5)}()},5999:(e,t,r)=>{"use strict";r.d(t,{es:()=>s});class s{constructor(e,t,r,s,n){this.method=e,this.url=t,this.body=r,this.headers=s,this.referrer=n,this.deserialize=async e=>await e.json()}}Error,Error},6491:(e,t,r)=>{"use strict";r(3131)},7032:(e,t,r)=>{"use strict";var s=r(3131),n=r.n(s),a=r(135),i=r(1414);class o{async get(e){const t=await n().storage.local.get(e);return t?.[e]??void 0}async set(e,t){await n().storage.local.set({[e]:t})}async remove(e){await n().storage.local.remove(e)}}function g(e){return new Promise(t=>setTimeout(t,e))}new class{token;apiBase;maxRetries;backoffBaseMs;storagePrefix;storage;getNow;distinctId;superProps={};optedOut=!1;initialized=!1;initPromise;KEYS={distinctId:"distinctId",superProps:"superProps",optedOut:"optedOut"};logger;constructor(e){this.token=e.token,this.apiBase=e.apiBase??"https://api.mixpanel.com",this.maxRetries=Math.max(0,e.maxRetries??2),this.backoffBaseMs=Math.max(0,e.backoffBaseMs??300),this.storagePrefix=e.storagePrefix??"mpw:",this.storage=e.storage??new o,this.getNow=e.getNow??(()=>Date.now()),this.logger=new i.C("MixpanelWorkerService")}async init(){this.initialized||(this.initPromise??=(async()=>{const[e,t,r]=await Promise.all([this.getStorage(this.KEYS.distinctId),this.getStorage(this.KEYS.superProps),this.getStorage(this.KEYS.optedOut)]);this.distinctId=e??await this.generateAndPersistDistinctId(),this.superProps=t??{},this.optedOut=r??!1;const s=n().runtime.getManifest?.();this.registerSuperProps({$lib:"mixpanel-worker-service",$lib_version:"1.0.0",$app_version:s?.version??null,extension_id:n().runtime.id,extension_name:s?.name??null,extension_version:s?.version??null,environment:this.inferEnvironment()??null,browser_vendor:this.inferBrowserVendor(),application:"extension"}),this.initialized=!0})(),await this.initPromise)}async ensureInit(){this.initialized||await this.init()}async identify(e){this.distinctId=e,await this.setStorage(this.KEYS.distinctId,e),this.logger.info("identify",{distinctId:e})}registerSuperProps(e){this.superProps={...this.superProps,...e},this.setStorage(this.KEYS.superProps,this.superProps).catch(()=>{}),this.logger.info("registerSuperProps",e)}async setOptOut(e){this.optedOut=e,await this.setStorage(this.KEYS.optedOut,e),this.logger.info("setOptOut",{optOut:e})}async track(e,t){if(this.optedOut)return;await this.ensureInit();const r={token:this.token,distinct_id:this.distinctId??null,time:Math.floor(this.getNow()/1e3),...this.superProps,...t??{}};this.logger.info("[MPW] track",{event:e,distinctId:this.distinctId,props:r}),await this.sendWithRetry([{event:e,properties:r}])||this.logger.warn("[MPW] track failed permanently",{event:e,props:r})}async reset(){await Promise.all([this.removeStorage(this.KEYS.distinctId),this.removeStorage(this.KEYS.superProps),this.removeStorage(this.KEYS.optedOut)]),this.distinctId=await this.generateAndPersistDistinctId(),this.superProps={},this.optedOut=!1,this.logger.info("[MPW] reset done",{distinctId:this.distinctId})}inferEnvironment(){try{return!1===("undefined"!=typeof navigator?navigator.onLine:void 0)?"offline":"online"}catch{return}}inferBrowserVendor(){try{const e=globalThis?.navigator?.userAgent??"";return/Firefox/i.test(e)?"firefox":/Edg\//i.test(e)?"edge":/Chrome/i.test(e)?"chrome":/Safari/i.test(e)?"safari":null}catch{return null}}isFirefox(){try{return/Firefox/i.test(globalThis?.navigator?.userAgent??"")}catch{return!1}}async sendWithRetry(e){const t=this.apiBase.replace(/\/$/,""),r=this.isFirefox(),s=function(e){const t=(new TextEncoder).encode(e);let r="";for(let e=0;e<t.length;e++)r+=String.fromCharCode(t[e]);return btoa(r)}(JSON.stringify(e));let n=0;for(;;){try{if(r){const e=`${t}/track?ip=1&img=1&data=${encodeURIComponent(s)}`;return await fetch(e,{method:"GET",mode:"no-cors"}),!0}{const e=new URLSearchParams;e.set("data",s),e.set("verbose","1");const r=await fetch(`${t}/track?ip=1`,{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:e.toString()});if(r.ok){const e=await r.json().catch(()=>({}));if(1===e?.status)return!0;this.logger.warn("[MPW] Mixpanel verbose error",e)}else if(this.logger.warn("[MPW] HTTP error",r.status),r.status>=400&&r.status<500)return!1}}catch(e){this.logger.warn("[MPW] fetch failed",e)}if(n>=this.maxRetries)return!1;n+=1;const e=this.backoffBaseMs*2**(n-1);await g(e)}}async generateAndPersistDistinctId(){const e=()=>Math.floor(65536*(1+Math.random())).toString(16).slice(1),t=`${e()}${e()}-${e()}-${e()}-${e()}-${e()}${e()}${e()}`;return await this.setStorage(this.KEYS.distinctId,t),t}k(e){return`${this.storagePrefix}${e}`}async getStorage(e){return this.storage.get(this.k(e))}async setStorage(e,t){return this.storage.set(this.k(e),t)}async removeStorage(e){return this.storage.remove(this.k(e))}}({apiBase:"https://api-eu.mixpanel.com",token:a.ZF,maxRetries:2,backoffBaseMs:300,storagePrefix:"pp:"})},8221:(e,t,r)=>{"use strict";var s=r(3131),n=r.n(s);class a{response;constructor(e){this.response=e}}Error,new class{async send(e){const t=await n().runtime.sendMessage(e.message),r=e.deserialize(t);return new a(r)}}},8260:(e,t,r)=>{"use strict";r(5049),r(3394);var s=r(3391);r(7032),new s.Ay(1)}},t={};function r(s){var n=t[s];if(void 0!==n)return n.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var s in t)r.o(t,s)&&!r.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(1414);r(5999).es,r(8221),r(8260),r(6491),new e.C("SearchTypeaheadMessageHandler")})()})();
//# sourceMappingURL=index.js.map